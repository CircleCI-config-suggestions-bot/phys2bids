FROM cirrusci/windowsservercore:2019

RUN powershell -NoLogo -NoProfile -Command \
    choco install -y --no-progress microsoft-visual-cpp-build-tools wget openssl ; \
    choco install -y --no-progress python --version=3.6 ; \
    choco install -y --no-progress make ; \
    refreshenv ; \
    $env:Path += ';c:\python36'; \
    $env:Path += ';c:\python36\Scripts'; \
    refreshenv; \
    echo $env:path; \
    wget -O certs.pem https://mkcert.org/generate/ ; \
    openssl pkcs12 -export -nokeys -out certs.pfx -in certs.pem \
    python -m pip install --upgrade pip ; \ 
    pip install --upgrade certifi ; \
    pip install wheel ; \
    pip install setuptools